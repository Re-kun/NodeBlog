<%- include("../layouts/header")%>

	<!-- container -->
	<main class=" md:px-7 lg:px-32">
		<div class="h-1"></div>
		<section class="mt-32 h-[35rem] mx-auto overflow-hidden flex  py-4 px-8 rounded-lg lg:border lg:border-black ">
			<ul class=" bg-gray-100 fixed z-10 md:static md:h-auto md:bottom-auto md:w-auto md:shadow-none md:bg-none z-50 h-[100vh] bottom-[-4rem] left-0 left-[-20rem] admin-sidebar w-60  shadow-lg shadow-slate-500">
				<li class="md:p-2 lg:w-auto  md:visible md:w-16 lg:p-5 text-sm  md:border-[0.1px] border-black hover:bg-gray-300  flex px-5 p-7 md:mt-3 border-b-[0.1px] md:rounded-lg"><a href="/post/create" class="flex items-center px-5"><p>X</p><span class="ml-3 lg:visible md:invisible">Add Post</span></a></li>
				<li class="md:p-2 lg:w-auto  md:visible md:w-16 lg:p-5 text-sm  md:border-[0.1px] border-black hover:bg-gray-300  flex px-5 p-7 md:mt-3 border-b-[0.1px] md:rounded-lg"><a href="/dashboard/post" class="flex items-center px-5"><p>X</p><span class="ml-3 lg:visible md:invisible">Management Post</span></a></li>	
				<li class="md:p-2 lg:w-auto  md:visible md:w-16 lg:p-5 text-sm  md:border-[0.1px] border-black hover:bg-gray-300  flex px-5 p-7 md:mt-3 border-b-[0.1px] md:rounded-lg"><a href="/user/create" class="flex items-center px-5"><p>X</p><span class="ml-3 lg:visible md:invisible">Add User</span></a></li>
				<li class="md:p-2 lg:w-auto  md:visible md:w-16 lg:p-5 text-sm  md:border-[0.1px] border-black hover:bg-gray-300  flex px-5 p-7 md:mt-3 border-b-[0.1px] md:rounded-lg"><a href="/dashboard/user" class="flex items-center px-5"><p>X</p><span class="ml-3 lg:visible md:invisible">Management User</span></a></li>
				<li class="md:p-2 lg:w-auto  md:visible md:w-16 lg:p-5 text-sm  md:border-[0.1px] border-black hover:bg-gray-300  flex px-5 p-7 md:mt-3 border-b-[0.1px] md:rounded-lg"><a href="/category/create" class="flex items-center px-5"><p>X</p><span class="ml-3 lg:visible md:invisible">Add Category</span></a></li>
				<li class="md:p-2 lg:w-auto  md:visible md:w-16 lg:p-5 text-sm  md:border-[0.1px] border-black hover:bg-gray-300  flex px-5 p-7 md:mt-3 border-b-[0.1px] md:rounded-lg"><a href="/dashboard/category" class="flex items-center px-5"><p>X</p><span class="ml-3 lg:visible md:invisible">Management Category</span></a></li>
			</ul>
			<div class="pr-8 lg:pr-5 pb-10 lg:ml-10 md:ml-0 md:pl-8 lg:px-0 lg:py-3 lg:w-[200%] overflow-hidden md:overflow-y-scroll overflow-x-hidden table-admin">
				<h1 class="text-black text-3xl mb-5">User</h1>
			<% if(error.length !== 0 ){ %>	
				<div class="bg-blue-100 my-2 p-5 w-full border-l-4 border-blue-500">
					<div class="flex space-x-3">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="flex-none fill-current text-blue-500 h-4 w-4">
						<path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4.597 17.954l-4.591-4.55-4.555 4.596-1.405-1.405 4.547-4.592-4.593-4.552 1.405-1.405 4.588 4.543 4.545-4.589 1.416 1.403-4.546 4.587 4.592 4.548-1.403 1.416z" />
					</svg>
					<div class="leading-tight flex flex-col space-y-2">
						<div class="flex-1 leading-snug text-sm text-blue-600">Lorem ipsum dolor sit amet consectetur adipisicing elit. At maiores porro, ipsa maxime vel</div>
					</div>
					</div>
				</div>
			<% } %>		
				<table class="w-full table-fixed ">
					<thead class="bg-[#c2c2c2] text-[#5c5c5c] md:table-header-group hidden">
					  <tr>
						<th class="px-3 py-2 text-left w-60">Name</th>
						<th class="px-3 py-2 text-left w-60">Username</th>
						<th class="px-3 py-2 text-left w-60">Update</th>
						<th class="px-3 py-2 text-left w-60">Delete</th>
					  </tr>
					</thead>
					<tbody class="w-full md:pr-0 md:static">
					  <div class="md:invisible w-10 h-8 bg-black fixed right-0 bottom-20 rounded-l-full  pl-3 text-sm font-extrabold py-[4.3px] text-white" onclick="adminSidebar()"><p>></p></div>
					<% for( let i = 0; i < data.length; i++ ) {%>

					  <tr class="md:table-row flex flex-col md:border-b md:border-[#4e4e4e] ">
						<td class="px-3 py-3 text-left border-b border-[#4e4e4e] "><%= data[i].username %></td>
						<td class="px-3 py-3 text-left border-b border-[#4e4e4e]">Admin</td>
						<td class="px-3 py-3 border-b border-[#4e4e4e]"><a href="/user/edit/<%= data[i].id %>" class="px-3 py-1 text-blue-500 border border-blue-500 rounded-lg hover:text-white hover:bg-blue-500">Update</a></td>
						<td  onclick="deleteUser(Number('<%= data[i].id %>'))" class="px-3 py-5 border-b border-[#4e4e4e]"><span href="" class="px-3 py-1 text-red-500 border border-red-500 rounded-lg hover:text-white hover:bg-red-500">Delete</span></td>
					  </tr>

					<% } %>
					</tbody>
				</table>
			</div>
		</section>

	</main>
	<!-- endContainer -->

	<script>
		function deleteUser(id) {
			fetch("http://localhost:3000/user/" + id, {
			  method: "DELETE",
			  headers: {
				"Content-Type" : "application/json"
			  },
			}).then( result => console.log(result) ).catch( error => console.log(error.message) );

			location.reload()
		};
	</script>
    <%- include("../layouts/footer")%>